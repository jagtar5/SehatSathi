{% extends "admin/base_site.html" %}

{% block content %}
<div class="report">
    <h1>Hospital Management System Report</h1>
    <p>Generated on: {% now "DATETIME_FORMAT" %}</p>
    
    <div class="summary-stats">
        <h2>Summary Statistics</h2>
        <table>
            <tr>
                <th>Total Patients</th>
                <td>{{ patients }}</td>
            </tr>
            <tr>
                <th>Total Doctors</th>
                <td>{{ doctors }}</td>
            </tr>
            <tr>
                <th>Total Appointments</th>
                <td>{{ appointments }}</td>
            </tr>
            <tr>
                <th>Total Revenue</th>
                <td>${{ revenue }}</td>
            </tr>
        </table>
    </div>

    <div class="appointment-stats">
        <h2>Appointments by Status</h2>
        <table>
            {% for item in appointments_by_status %}
            <tr>
                <td>{{ item.status }}</td>
                <td>{{ item.count }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>

    <div class="top-doctors">
        <h2>Top 5 Busiest Doctors</h2>
        <table>
            {% for doctor in top_doctors %}
            <tr>
                <td>Dr. {{ doctor.first_name }} {{ doctor.last_name }}</td>
                <td>{{ doctor.appointment_count }} appointments</td>
            </tr>
            {% endfor %}
        </table>
    </div>

    <div class="recent-bills">
        <h2>Recent Bills</h2>
        <table>
            {% for bill in recent_bills %}
            <tr>
                <td>{{ bill.patient }}</td>
                <td>${{ bill.amount }}</td>
                <td>{{ bill.status }}</td>
                <td>{{ bill.bill_date|date:"SHORT_DATE_FORMAT" }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>
{% endblock %}